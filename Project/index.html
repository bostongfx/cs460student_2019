  <head>
    <meta charset="UTF-8" />
    <style>
      html, body { 
        background-color:#000;
        margin: 0;
        padding: 0;
        height: 100%;
        overflow: hidden !important;  

      }
    </style>

    <script src="https://threejs.org/build/three.min.js" type="text/javascript"></script>
    <script src="https://threejs.org/examples/js/controls/TrackballControls.js" type="text/javascript"></script>
    <script src="https://threejs.org/examples/js/loaders/OBJLoader.js" type="text/javascript"></script>
    <script src="https://threejs.org/examples/js/loaders/MTLLoader.js" type="text/javascript"></script>
    <script src="https://threejs.org/examples/js/loaders/TDSLoader.js" type="text/javascript"></script>
    <script src="https://threejs.org/examples/js/loaders/DDSLoader.js" type="text/javascript"></script> 
    <script src="https://threejs.org/examples/js/loaders/FBXLoader.js" type="text/javascript"></script>
    <script src="robot.js" type="text/javascript"></script>
    <script src="signal.js" type="text/javascript"></script>
     <script src="lights.js" type="text/javascript"></script>
    <script src="helper.js" type="text/javascript"></script>
    <script src="https://threejs.org/examples/js/libs/dat.gui.min.js" type="text/javascript"></script>
    <script>

      var z, scene, camera, skybox, renderer, ambientLight, light, controls, model, model1, helirunner, carmodel, count = 2, carmodel1, carmodel2, c, d , e;
      var container;
      var floor;

 window.onload = function() {

                // load textures
        var floorTexture = new THREE.TextureLoader().load( 'road.png' );
        var wallTexture = new THREE.TextureLoader().load( 'glass.jpg' );
        var stadiumTexture = new THREE.TextureLoader().load( 'concrete.jpg' );
        var buildingblueTexture = new THREE.TextureLoader().load( 'buildingblue.jpg' );
        var buildingredTexture = new THREE.TextureLoader().load( 'buildingred.jpg' );
        var buildingwhiteTexture = new THREE.TextureLoader().load( 'buildingwhite.jpg' );
        var apartment01Texture = new THREE.TextureLoader().load( 'apartment01.jpg' );
        var building01Texture = new THREE.TextureLoader().load( 'building01.jpg' );

        var whiteTexture = new THREE.TextureLoader().load( 'white.jpg' );
        var yellowTexture = new THREE.TextureLoader().load( 'yellow.png' );
        var blackTexture = new THREE.TextureLoader().load( 'black.jpg' );
        var mountTexture = new THREE.TextureLoader().load( 'everest/mount.jpg' );
        var brickTexture = new THREE.TextureLoader().load( 'brick.jpg' );
        var carTexture = new THREE.TextureLoader().load( 'Models/rover-red.jpg' );
        scene = new THREE.Scene();

        var fov = 60;
        var ratio = window.innerWidth / window.innerHeight;
        var zNear = 1;
        var zFar = 100000000;
        camera = new THREE.PerspectiveCamera(fov, ratio, zNear, zFar);
        camera.position.set( 0, 0, 500);

        renderer = new THREE.WebGLRenderer({ alpha: true });
        renderer.setSize( window.innerWidth, window.innerHeight );

        container = document.createElement( 'div' );
        document.body.appendChild( container );

        var keyLight = new THREE.DirectionalLight(new THREE.Color('hsl(30, 100%, 75%)'), 1.0);
        keyLight.position.set(-100, 0, 100);


        var fillLight = new THREE.DirectionalLight(new THREE.Color('hsl(240, 100%, 75%)'), 0.75);
        fillLight.position.set(100, 0, 100);

         var backLight = new THREE.DirectionalLight(0xffffff, 1.0);
        backLight.position.set(100, 0, -100).normalize;


        scene.add(keyLight);
        scene.add(fillLight);
        scene.add(backLight);

        var object;


        function loadModel() {
          object.traverse( function ( child ) {
            if ( child.isMesh ) child.material.map = texture;
          } );
          object.position.z = -50000;
          object.position.y = -100;
          scene.add( object );
        }

        var manager = new THREE.LoadingManager( loadModel );
        manager.onProgress = function ( item, loaded, total ) {
          // console.log( item, loaded, total );
        };
        // texture
        var textureLoader = new THREE.TextureLoader( manager );
        var texture = textureLoader.load( 'moon/Textures/Bump_2K.png' );
        // model
        function onProgress( xhr ) {
          if ( xhr.lengthComputable ) {
            var percentComplete = xhr.loaded / xhr.total * 100;
            // console.log( 'model ' + Math.round( percentComplete, 2 ) + '% downloaded' );
          }
        }

        function onError() {}
        var loader = new THREE.OBJLoader( manager );
        loader.load( 'moon/Moon 2K.obj', function ( obj ) {
          object = obj;
           object.scale.set(2000,2000,2000);

        }, onProgress, onError );

//Adding helicopter

var heliTexture = new THREE.TextureLoader().load('UH60/fuselage.jpg');

loader.load('UH60/uh60.obj', function (objectheli) {

          objectheli.position.x = -3000;
          objectheli.rotateX(80);
          objectheli.rotateZ(200);
          //objectheli.rotateX(-Math.PI);
          // objectheli.rotateY(-Math.PI);
          //objectheli.rotateZ(-Math.PI);
          objectheli.position.y = 1000;
          objectheli.position.z = -600;
          objectheli.translateZ( 1000); 
      objectheli.scale.set(25,25,50);
      
      objectheli.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = heliTexture;
        //  child.material.map = texture1;
                }
            });
       model = objectheli;
        scene.add(objectheli);
        
    });

// Adding an aeroplane in the sky

loader.load('aeroplane/airways.obj', function (aeroplane) {
          aeroplane.position.x = 1000;
          aeroplane.position.y = 3380;
          aeroplane.position.z = 3000;
          aeroplane.translateZ( 1000); 
          //aeroplane.rotateX(80);
          //aeroplane.rotateZ(200);
          aeroplane.rotateY(Math.PI/2);
      	  aeroplane.scale.set(0.5,0.5,0.5);
      
      aeroplane.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = yellowTexture;
        //  child.material.map = texture1;
                }
            });
      model1 = aeroplane;
        scene.add(aeroplane);
    });


//Adding Floyover

loader.load('bridge/MerahPutih2.obj', function (bridge) {
          bridge.position.x = 1000;
          bridge.position.y = -380;
          bridge.position.z = 3000;
          bridge.rotateY(Math.PI/2);
      // bridge.scale.set(200,200,200);
      
      bridge.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = yellowTexture;
        //  child.material.map = texture1;
                }
            });
        scene.add(bridge);
    });


loader.load('WelcomePoster/obj/objWelcome.obj', function (welcome) {
          welcome.position.x = -5800;
          welcome.position.y = -100;
          welcome.position.z = 1800;
          //welcome.rotate.Y(Math.PI);
          welcome.rotation.y = THREE.Math.degToRad(270);
      	  welcome.scale.set(20,20,20);
      
      welcome.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = brickTexture;
        //  child.material.map = texture1;
                }
            }); 
        scene.add(welcome);
    });

//Adding Aparrtment01

loader.load('apartment01/Panel_House_Wikipedia_of_Russia_01.obj', function (Apartment01) {
          Apartment01.position.x = -2000;
          Apartment01.position.y = -100;
          Apartment01.position.z = 4000;
      	  Apartment01.scale.set(2.5,2.5,2.5);
      
      Apartment01.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = apartment01Texture;
        //  child.material.map = texture1;
                }
            }); 
        scene.add(Apartment01);
    });

loader.load('apartment01/Panel_House_Wikipedia_of_Russia_01.obj', function (Apartment02) {
          Apartment02.position.x = -2200;
          Apartment02.position.y = -100;
          Apartment02.position.z = 4000;
      	  Apartment02.scale.set(2.5,2.5,2.5);
      
      Apartment02.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = apartment01Texture;
        //  child.material.map = texture1;
                }
            }); 
        scene.add(Apartment02);
    });

loader.load('apartment01/Panel_House_Wikipedia_of_Russia_01.obj', function (Apartment03) {
          Apartment03.position.x = -2400;
          Apartment03.position.y = -100;
          Apartment03.position.z = 4000;
      	  Apartment03.scale.set(2.5,2.5,2.5);
      
      Apartment03.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = apartment01Texture;
        //  child.material.map = texture1;
                }
            }); 
        scene.add(Apartment03);
    });

// loader.load('apartment01/Panel_House_Wikipedia_of_Russia_01.obj', function (Apartment04) {
//           Apartment01.position.x = -2600;
//           Apartment01.position.y = -100;
//           Apartment01.position.z = 4000;
//       	  Apartment01.scale.set(2.5,2.5,2.5);
      
//       Apartment01.traverse(function (child) {   // aka setTexture
//                 if (child instanceof THREE.Mesh) {
//                     child.material.map = apartment01Texture;
//         //  child.material.map = texture1;
//                 }
//             }); 
//         scene.add(Apartment01);
//     });

// loader.load('apartment01/Panel_House_Wikipedia_of_Russia_01.obj', function (Apartment01) {
//           Apartment01.position.x = -2800;
//           Apartment01.position.y = -100;
//           Apartment01.position.z = 4000;
//       	  Apartment01.scale.set(2.5,2.5,2.5);
      
//       Apartment01.traverse(function (child) {   // aka setTexture
//                 if (child instanceof THREE.Mesh) {
//                     child.material.map = apartment01Texture;
//         //  child.material.map = texture1;
//                 }
//             }); 
//         scene.add(Apartment01);
//     });

// loader.load('apartment01/Panel_House_Wikipedia_of_Russia_01.obj', function (Apartment01) {
//           Apartment01.position.x = -3000;
//           Apartment01.position.y = -100;
//           Apartment01.position.z = 4000;
//       	  Apartment01.scale.set(2.5,2.5,2.5);
      
//       Apartment01.traverse(function (child) {   // aka setTexture
//                 if (child instanceof THREE.Mesh) {
//                     child.material.map = apartment01Texture;
//         //  child.material.map = texture1;
//                 }
//             }); 
//         scene.add(Apartment01);
//     });

// loader.load('apartment01/Panel_House_Wikipedia_of_Russia_01.obj', function (Apartment01) {
//           Apartment01.position.x = -3200;
//           Apartment01.position.y = -100;
//           Apartment01.position.z = 4000;
//       	  Apartment01.scale.set(2.5,2.5,2.5);
      
//       Apartment01.traverse(function (child) {   // aka setTexture
//                 if (child instanceof THREE.Mesh) {
//                     child.material.map = apartment01Texture;
//         //  child.material.map = texture1;
//                 }
//             }); 
//         scene.add(Apartment01);
//     });

// loader.load('apartment01/Panel_House_Wikipedia_of_Russia_01.obj', function (Apartment01) {
//           Apartment01.position.x = -3400;
//           Apartment01.position.y = -100;
//           Apartment01.position.z = 4000;
//       	  Apartment01.scale.set(2.5,2.5,2.5);
      
//       Apartment01.traverse(function (child) {   // aka setTexture
//                 if (child instanceof THREE.Mesh) {
//                     child.material.map = apartment01Texture;
//         //  child.material.map = texture1;
//                 }
//             }); 
//         scene.add(Apartment01);
//     });

// loader.load('apartment01/Panel_House_Wikipedia_of_Russia_01.obj', function (Apartment01) {
//           Apartment01.position.x = -3600;
//           Apartment01.position.y = -100;
//           Apartment01.position.z = 4000;
//       	  Apartment01.scale.set(2.5,2.5,2.5);
      
//       Apartment01.traverse(function (child) {   // aka setTexture
//                 if (child instanceof THREE.Mesh) {
//                     child.material.map = apartment01Texture;
//         //  child.material.map = texture1;
//                 }
//             }); 
//         scene.add(Apartment01);
//     });

// loader.load('apartment01/Panel_House_Wikipedia_of_Russia_01.obj', function (Apartment01) {
//           Apartment01.position.x = -3800;
//           Apartment01.position.y = -100;
//           Apartment01.position.z = 4000;
//       	  Apartment01.scale.set(2.5,2.5,2.5);
      
//       Apartment01.traverse(function (child) {   // aka setTexture
//                 if (child instanceof THREE.Mesh) {
//                     child.material.map = apartment01Texture;
//         //  child.material.map = texture1;
//                 }
//             }); 
//         scene.add(Apartment01);
//     });


// loader.load('apartment01/Panel_House_Wikipedia_of_Russia_01.obj', function (Apartment01) {
//           Apartment01.position.x = -4000;
//           Apartment01.position.y = -100;
//           Apartment01.position.z = 4000;
//       	  Apartment01.scale.set(2.5,2.5,2.5);
      
//       Apartment01.traverse(function (child) {   // aka setTexture
//                 if (child instanceof THREE.Mesh) {
//                     child.material.map = apartment01Texture;
//         //  child.material.map = texture1;
//                 }
//             }); 
//         scene.add(Apartment01);
//     });

// loader.load('apartment01/Panel_House_Wikipedia_of_Russia_01.obj', function (Apartment01) {
//           Apartment01.position.x = -3800;
//           Apartment01.position.y = -100;
//           Apartment01.position.z = 4000;
//       	  Apartment01.scale.set(2.5,2.5,2.5);
      
//       Apartment01.traverse(function (child) {   // aka setTexture
//                 if (child instanceof THREE.Mesh) {
//                     child.material.map = apartment01Texture;
//         //  child.material.map = texture1;
//                 }
//             }); 
//         scene.add(Apartment01);
//     });


// loader.load('apartment01/Panel_House_Wikipedia_of_Russia_01.obj', function (Apartment01) {
//           Apartment01.position.x = -3600;
//           Apartment01.position.y = -100;
//           Apartment01.position.z = 4000;
//       	  Apartment01.scale.set(2.5,2.5,2.5);
      
//       Apartment01.traverse(function (child) {   // aka setTexture
//                 if (child instanceof THREE.Mesh) {
//                     child.material.map = apartment01Texture;
//         //  child.material.map = texture1;
//                 }
//             }); 
//         scene.add(Apartment01);
//     });

// loader.load('apartment01/Panel_House_Wikipedia_of_Russia_01.obj', function (Apartment01) {
//           Apartment01.position.x = -3400;
//           Apartment01.position.y = -100;
//           Apartment01.position.z = 4000;
//       	  Apartment01.scale.set(2.5,2.5,2.5);
      
//       Apartment01.traverse(function (child) {   // aka setTexture
//                 if (child instanceof THREE.Mesh) {
//                     child.material.map = apartment01Texture;
//         //  child.material.map = texture1;
//                 }
//             }); 
//         scene.add(Apartment01);
//     });


// loader.load('apartment01/Panel_House_Wikipedia_of_Russia_01.obj', function (Apartment01) {
//           Apartment01.position.x = -3200;
//           Apartment01.position.y = -100;
//           Apartment01.position.z = 4000;
//       	  Apartment01.scale.set(2.5,2.5,2.5);
      
//       Apartment01.traverse(function (child) {   // aka setTexture
//                 if (child instanceof THREE.Mesh) {
//                     child.material.map = apartment01Texture;
//         //  child.material.map = texture1;
//                 }
//             }); 
//         scene.add(Apartment01);
//     });

// loader.load('apartment01/Panel_House_Wikipedia_of_Russia_01.obj', function (Apartment01) {
//           Apartment01.position.x = -3000;
//           Apartment01.position.y = -100;
//           Apartment01.position.z = 4000;
//       	  Apartment01.scale.set(2.5,2.5,2.5);
      
//       Apartment01.traverse(function (child) {   // aka setTexture
//                 if (child instanceof THREE.Mesh) {
//                     child.material.map = apartment01Texture;
//         //  child.material.map = texture1;
//                 }
//             }); 
//         scene.add(Apartment01);
//     });

// loader.load('apartment01/Panel_House_Wikipedia_of_Russia_01.obj', function (Apartment01) {
//           Apartment01.position.x = -2800;
//           Apartment01.position.y = -100;
//           Apartment01.position.z = 4000;
//       	  Apartment01.scale.set(2.5,2.5,2.5);
      
//       Apartment01.traverse(function (child) {   // aka setTexture
//                 if (child instanceof THREE.Mesh) {
//                     child.material.map = apartment01Texture;
//         //  child.material.map = texture1;
//                 }
//             }); 
//         scene.add(Apartment01);
//     });

// loader.load('apartment01/Panel_House_Wikipedia_of_Russia_01.obj', function (Apartment01) {
//           Apartment01.position.x = -2600;
//           Apartment01.position.y = -100;
//           Apartment01.position.z = 4000;
//       	  Apartment01.scale.set(2.5,2.5,2.5);
      
//       Apartment01.traverse(function (child) {   // aka setTexture
//                 if (child instanceof THREE.Mesh) {
//                     child.material.map = apartment01Texture;
//         //  child.material.map = texture1;
//                 }
//             }); 
//         scene.add(Apartment01);
//     });

// loader.load('apartment01/Panel_House_Wikipedia_of_Russia_01.obj', function (Apartment01) {
//           Apartment01.position.x = -2400;
//           Apartment01.position.y = -100;
//           Apartment01.position.z = 4000;
//       	  Apartment01.scale.set(2.5,2.5,2.5);
      
//       Apartment01.traverse(function (child) {   // aka setTexture
//                 if (child instanceof THREE.Mesh) {
//                     child.material.map = apartment01Texture;
//         //  child.material.map = texture1;
//                 }
//             }); 
//         scene.add(Apartment01);
//     });
 
 // Adding Apartment03s
loader.load('apartment03/apartment03.obj', function (Apartment03) {
          Apartment03.position.x = 2300;
          Apartment03.position.y = -400;
          Apartment03.position.z = 4500;
      	  Apartment03.scale.set(45,45,45);
      
      Apartment03.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = apartment01Texture;
        //  child.material.map = texture1;
                }
            });
        scene.add(Apartment03);
    });


loader.load('apartment03/apartment03.obj', function (Apartment03) {
          Apartment03.position.x = 2000;
          Apartment03.position.y = -400;
          Apartment03.position.z = 4500;
      	  Apartment03.scale.set(45,45,45);
      
      Apartment03.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = apartment01Texture;
        //  child.material.map = texture1;
                }
            });
        scene.add(Apartment03);
    });

loader.load('apartment03/apartment03.obj', function (Apartment03) {
          Apartment03.position.x = 1700;
          Apartment03.position.y = -400;
          Apartment03.position.z = 4500;
      	  Apartment03.scale.set(45,45,45);
      
      Apartment03.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = apartment01Texture;
        //  child.material.map = texture1;
                }
            });
        scene.add(Apartment03);
    });




 // Adding Apartment02s

loader.load('apartment02/Apartment Building_17_obj.obj', function (Apartment02) {
          Apartment02.position.x = 2800;
          Apartment02.position.y = -100;
          Apartment02.position.z = 4000;
      	  Apartment02.scale.set(0.3,0.3,0.3);
      
      Apartment02.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = apartment01Texture;
        //  child.material.map = texture1;
                }
            });
        scene.add(Apartment02);
    });

loader.load('apartment02/Apartment Building_17_obj.obj', function (Apartment02) {
          Apartment02.position.x = 2900;
          Apartment02.position.y = -100;
          Apartment02.position.z = 4000;
      	  Apartment02.scale.set(0.3,0.3,0.3);
      
      Apartment02.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = apartment01Texture;
        //  child.material.map = texture1;
                }
            });
        scene.add(Apartment02);
    });



 loader.load('apartment02/Apartment Building_17_obj.obj', function (Apartment02) {
          Apartment02.position.x = 3000;
          Apartment02.position.y = -100;
          Apartment02.position.z = 4000;
      	  Apartment02.scale.set(0.30,0.30,0.30);
      
      Apartment02.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = apartment01Texture;
        //  child.material.map = texture1;
                }
            });
        scene.add(Apartment02);
    });

loader.load('apartment02/Apartment Building_17_obj.obj', function (Apartment02) {
          Apartment02.position.x = 3100;
          Apartment02.position.y = -100;
          Apartment02.position.z = 4000;
      	  Apartment02.scale.set(0.30,0.30,0.30);
      
      Apartment02.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = apartment01Texture;
        //  child.material.map = texture1;
                }
            });
        scene.add(Apartment02);
    });


loader.load('apartment02/Apartment Building_17_obj.obj', function (Apartment02) {
          Apartment02.position.x = 3200;
          Apartment02.position.y = -100;
          Apartment02.position.z = 4000;
      	  Apartment02.scale.set(0.30,0.30,0.30);
      
      Apartment02.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = apartment01Texture;
        //  child.material.map = texture1;
                }
            });
        scene.add(Apartment02);
    });

loader.load('apartment02/Apartment Building_17_obj.obj', function (Apartment02) {
          Apartment02.position.x = 3300;
          Apartment02.position.y = -100;
          Apartment02.position.z = 4000;
      	  Apartment02.scale.set(0.30,0.30,0.30);
      
      Apartment02.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = apartment01Texture;
        //  child.material.map = texture1;
                }
            });
        scene.add(Apartment02);
    });


loader.load('apartment02/Apartment Building_17_obj.obj', function (Apartment02) {
          Apartment02.position.x = 3400;
          Apartment02.position.y = -100;
          Apartment02.position.z = 4000;
      	  Apartment02.scale.set(0.30,0.30,0.30);
      
      Apartment02.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = apartment01Texture;
        //  child.material.map = texture1;
                }
            });
        scene.add(Apartment02);
    });


loader.load('apartment02/Apartment Building_17_obj.obj', function (Apartment02) {
          Apartment02.position.x = 3500;
          Apartment02.position.y = -100;
          Apartment02.position.z = 4000;
      	  Apartment02.scale.set(0.30,0.30,0.30);
      
      Apartment02.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = apartment01Texture;
        //  child.material.map = texture1;
                }
            });
        scene.add(Apartment02);
    });


// loader.load('apartment02/Apartment Building_17_obj.obj', function (Apartment02) {
//           Apartment02.position.x = 3600;
//           Apartment02.position.y = -100;
//           Apartment02.position.z = 4000;
//       	  Apartment02.scale.set(0.30,0.30,0.30);
      
//       Apartment02.traverse(function (child) {   // aka setTexture
//                 if (child instanceof THREE.Mesh) {
//                     child.material.map = apartment01Texture;
//         //  child.material.map = texture1;
//                 }
//             });
//         scene.add(Apartment02);
//     });


// loader.load('apartment02/Apartment Building_17_obj.obj', function (Apartment02) {
//           Apartment02.position.x = 3700;
//           Apartment02.position.y = -100;
//           Apartment02.position.z = 4000;
//       	  Apartment02.scale.set(0.30,0.30,0.30);
      
//       Apartment02.traverse(function (child) {   // aka setTexture
//                 if (child instanceof THREE.Mesh) {
//                     child.material.map = apartment01Texture;
//         //  child.material.map = texture1;
//                 }
//             });
//         scene.add(Apartment02);
//     });


// loader.load('apartment02/Apartment Building_17_obj.obj', function (Apartment02) {
//           Apartment02.position.x = 3800;
//           Apartment02.position.y = -100;
//           Apartment02.position.z = 4000;
//       	  Apartment02.scale.set(0.3,0.3,0.3);
      
//       Apartment02.traverse(function (child) {   // aka setTexture
//                 if (child instanceof THREE.Mesh) {
//                     child.material.map = apartment01Texture;
//         //  child.material.map = texture1;
//                 }
//             });
//         scene.add(Apartment02);
//     });



//Adding skyscraper

loader.load('skyscraper02/skyscraper02.obj', function (skyscraper) {
          skyscraper.position.x = -1100;
          skyscraper.position.y = -100;
          skyscraper.position.z = 4000;
      	  skyscraper.scale.set(0.2,0.2,0.2);
      
      skyscraper.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = brickTexture;
        //  child.material.map = texture1;
                }
            });
        scene.add(skyscraper);
    });


loader.load('skyscraper02/skyscraper02.obj', function (skyscraper2) {
          skyscraper2.position.x = -900;
          skyscraper2.position.y = -100;
          skyscraper2.position.z = 4000;
      	  skyscraper2.scale.set(0.2,0.2,0.2);
      
      skyscraper2.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = brickTexture;
        //  child.material.map = texture1;
                }
            });
        scene.add(skyscraper2);
    });

loader.load('skyscraper02/skyscraper02.obj', function (skyscraper1) {
          skyscraper1.position.x = -700;
          skyscraper1.position.y = -100;
          skyscraper1.position.z = 4000;
      	  skyscraper1.scale.set(0.2,0.2,0.2);
      
      skyscraper1.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = brickTexture;
        //  child.material.map = texture1;
                }
            });
        scene.add(skyscraper1);
    });

// loader.load('skyscraper02/skyscraper02.obj', function (skyscraper) {
//           skyscraper.position.x = -500;
//           skyscraper.position.y = -100;
//           skyscraper.position.z = 4000;
//       	  skyscraper.scale.set(0.2,0.2,0.2);
      
//       skyscraper.traverse(function (child) {   // aka setTexture
//                 if (child instanceof THREE.Mesh) {
//                     child.material.map = brickTexture;
//         //  child.material.map = texture1;
//                 }
//             });
//         scene.add(skyscraper);
//     });

loader.load('skyscraper03/Building.obj', function (skyscraper03) {
          skyscraper03.position.x = 800;
          skyscraper03.position.y = -100;
          skyscraper03.position.z = 4000;
      skyscraper03.scale.set(2,2,2);
      
      skyscraper03.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = brickTexture;

                }
            });
        scene.add(skyscraper03);
    });

// loader.load('skyscraper03/Building.obj', function (skyscraper03) {
//           skyscraper03.position.x = 1000;
//           skyscraper03.position.y = -100;
//           skyscraper03.position.z = 4000;
//       skyscraper03.scale.set(2,2,2);
      
//       skyscraper03.traverse(function (child) {   // aka setTexture
//                 if (child instanceof THREE.Mesh) {
//                     child.material.map = brickTexture;

//                 }
//             });
//         scene.add(skyscraper03);
//     });


// loader.load('skyscraper03/Building.obj', function (skyscraper03) {
//           skyscraper03.position.x = 1200;
//           skyscraper03.position.y = -100;
//           skyscraper03.position.z = 4000;
//       skyscraper03.scale.set(2,2,2);
      
//       skyscraper03.traverse(function (child) {   // aka setTexture
//                 if (child instanceof THREE.Mesh) {
//                     child.material.map = brickTexture;

//                 }
//             });
//         scene.add(skyscraper03);
//     });

// Adding Amphitheater

loader.load('amphitheater/Amphitheater.obj', function (Amphitheater) {
          Amphitheater.position.x = 4800;
          Amphitheater.position.y = -100;
          Amphitheater.position.z = 4000;
      	//Amphitheater.scale.set(2,2,2);
      
      Amphitheater.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = brickTexture;

                }
            });
        scene.add(Amphitheater);
    });

// Adding Batman

loader.load('batman/batman.obj', function (Batman) {
          Batman.position.x = 4875;
          Batman.position.y = -200;
          Batman.position.z = 4000;
      	//Batman.scale.set(2,2,2);
      /*
      Batman.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = blackTexture;

                }
            }); */
        scene.add(Batman);
    });

// Adding Trees
var leafTexture = new THREE.TextureLoader().load( 'leaf.png' );

loader.load('Christmas Tree.obj', function (objecttree) {
          objecttree.position.x = -800;
          objecttree.position.y = -100;
          objecttree.position.z = -1000;
      objecttree.scale.set(10,10,10);
      
      objecttree.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = leafTexture;
        //  child.material.map = texture1;
                }
            });
        scene.add(objecttree);
    });

loader.load('Christmas Tree.obj', function (objecttree2) {
          objecttree2.position.x = -3000;
          objecttree2.position.y = -100;
          objecttree2.position.z = -1000;
      objecttree2.scale.set(10,10,10);
      
      objecttree2.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = leafTexture;
        //  child.material.map = texture1;
                }
            });
        scene.add(objecttree2);
    });

loader.load('Christmas Tree.obj', function (objecttree3) {
          objecttree3.position.x = 800;
          objecttree3.position.y = -100;
          objecttree3.position.z = -1000;
      objecttree3.scale.set(10,10,10);
      
      objecttree3.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = leafTexture;
   
                }
            });
        scene.add(objecttree3);
    });


loader.load('Christmas Tree.obj', function (objecttree4) {
          objecttree4.position.x = 3000;
          objecttree4.position.y = -100;
          objecttree4.position.z = -1000;
      objecttree4.scale.set(10,10,10);
      
      objecttree4.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = leafTexture;
    
                }
            });
        scene.add(objecttree4);
    });
  

  loader.load('Christmas Tree.obj', function (objecttree5) {
          objecttree5.position.x = 1000;
          objecttree5.position.y = -100;
          objecttree5.position.z = -3000;

      objecttree5.scale.set(10,10,10);
      
      objecttree5.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = leafTexture;
 
                }
            });
        scene.add(objecttree5);
    });
  

  loader.load('Christmas Tree.obj', function (objecttree6) {
          objecttree6.position.x = -950;
          objecttree6.position.y = -100;
          objecttree6.position.z = -3000;
      objecttree6.scale.set(10,10,10);
      
      objecttree6.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = leafTexture;
        
                }
            });
        scene.add(objecttree6);
    });
  
  
  // create skybox
  let materialArray = [];
  let tl = new THREE.TextureLoader();
  let tx_ft = tl.load("stormydays_ft.png");
  let tx_bk = tl.load("stormydays_bk.png");
  let tx_up = tl.load("stormydays_up.png");
  let tx_dn = tl.load("stormydays_up.png");
  let tx_rt = tl.load("stormydays_rt.png");
  let tx_lf = tl.load("stormydays_lf.png");

  materialArray.push(new THREE.MeshBasicMaterial({ map: tx_ft }));
  materialArray.push(new THREE.MeshBasicMaterial({ map: tx_bk }));
  materialArray.push(new THREE.MeshBasicMaterial({ map: tx_up }));
  materialArray.push(new THREE.MeshBasicMaterial({ map: tx_dn }));
  materialArray.push(new THREE.MeshBasicMaterial({ map: tx_rt }));
  materialArray.push(new THREE.MeshBasicMaterial({ map: tx_lf }));

for (var i = 0; i < 6; i++)
    materialArray[i].side = THREE.BackSide;

  let skyboxGeo = new THREE.BoxGeometry( 100000000, 100000000, 100000000 );
  skybox = new THREE.Mesh(skyboxGeo, materialArray);
  scene.add(skybox);


        var floorGeometry = new THREE.PlaneBufferGeometry( 12000, 10000 );
        var floorMaterial = new THREE.MeshBasicMaterial( {
          map: floorTexture,
          side: THREE.DoubleSide
        } );
        floor = new THREE.Mesh( floorGeometry, floorMaterial );
        floor.position.y = -100;
        floor.rotateX(Math.PI/2);
        scene.add( floor );

  // var loader = new THREE.OBJLoader(); 
  var mtlLoader = new THREE.MTLLoader();
  
    

        //3d objects

       
        loader.load('lowpolybuildings.obj', function (object) {
          object.position.x = -3000;
          object.position.y = -100;
          object.position.z = -1300;
      
		  
		  object.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = buildingredTexture;
				//	child.material.map = texture1;
                }
            }); 
		
		  
		  
          scene.add( object )
          } );


        loader.load('lowpolybuildings.obj', function (object3) {
          object3.position.x = -2000;
          object3.position.y = -100;
          object3.position.z = 1300;
      
      
      object3.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = buildingblueTexture;
        //  child.material.map = texture1;
                }
            });
    
         scene.add( object3 )
          } );

        loader.load('lowpolybuildings.obj', function (object4) {
          object4.position.x = 2200;
          object4.position.y = -100;
          object4.position.z = 1300;
      
      
      object4.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = buildingblueTexture;
                }
            });
      
          scene.add( object4)
          } );

         loader.load('lowpolybuildings.obj', function (object5) {
          object5.position.x = 3600;
          object5.position.y = -100;
          object5.position.z = -1300;
      
      
      object5.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = buildingblueTexture;
                }
            });
    
      
      
          scene.add( object5 )
          } );

         //water

          var video = document.getElementById('video');
        video.play();
        var meshTexture = new THREE.VideoTexture( video );
		   
        var waterGeometry = new THREE.PlaneBufferGeometry( 100, 100 );
        var waterMaterial = new THREE.MeshBasicMaterial( {
          map: meshTexture,
          // side: THREE.DoubleSide
        } );
        water = new THREE.Mesh( waterGeometry, waterMaterial );
        water.position.x = -3000;
        water.position.z = -3400;
        water.position.y = -80;
        water.scale.set(25,40,60);
        water.rotateX(-Math.PI/2);
        scene.add( water );


//park

        // var loader = new THREE.FBXLoader();
        // loader.load( 'park/children area.fbx', function ( park ) {
        //   mixer = new THREE.AnimationMixer( park );
        //   var action = mixer.clipAction( park.animations[ 0 ] );
        //   action.play();
        //   park.traverse( function ( child ) {
        //     if ( child.isMesh ) {
        //       child.castShadow = true;
        //       child.receiveShadow = true;
        //     }
        //   } );
        //   scene.add( park );
        // } );

// stadium

        loader.load('Stadium/sports stadium.obj', function (stadium) {
          stadium.position.x = 3900;
          stadium.position.y = -80;
          stadium.position.z = -3800;
          stadium.scale.set(0.6,0.6,0.6);
          // object2.rotateY(Math.PI/2);
      
      stadium.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = stadiumTexture;
        //  child.material.map = texture1;
                }
            });
    
      
      
          scene.add( stadium )
          } );




// mountains

        loader.load('everest/everest.obj', function (object2) {
          object2.position.x = -4300;
          object2.position.y = 50;
          object2.position.z = -3800;
          object2.scale.set(1000,1000,1000);
          // object2.rotateY(Math.PI/2);
		  
		  object2.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = mountTexture;
				//	child.material.map = texture1;
                }
            });
		
		  
		  
          scene.add( object2 )
          } );


           loader.load('everest/everest.obj', function (objectmount) {
          objectmount.position.x = -4300;
          objectmount.position.y = 50;
          objectmount.position.z = -2800;
          objectmount.scale.set(700,700,900);
          // object2.rotateY(Math.PI/2);
      
      objectmount.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = mountTexture;
        //  child.material.map = texture1;
                }
            });
    
      
      
          scene.add( objectmount )
          } );


// Car


// var leafTexture = new THREE.TextureLoader().load( '/Models/rover-red.jpg' );

loader.load('Models/1.obj', function (objectcar) {
          objectcar.position.x = -4000;
          objectcar.position.y = -100;
          objectcar.position.z = 500;

      objectcar.scale.set(0.002,0.002,0.002);
      objectcar.rotateY(Math.PI/2);
      objectcar.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = carTexture;
                }
            });
      carmodel1 = objectcar;
        scene.add(objectcar);
    });

loader.load('Models/1.obj', function (objectcar1) {
          objectcar1.position.x = 2000;
          objectcar1.position.y = -100;
          objectcar1.position.z = -500;

      objectcar1.scale.set(0.002,0.002,0.002);
      objectcar1.rotateY(-Math.PI/2);
      objectcar1.traverse(function (child) {   // aka setTexture
                if (child instanceof THREE.Mesh) {
                    child.material.map = carTexture;
                }
            });
      carmodel2 = objectcar1
        scene.add(objectcar1);
    });




 let normalz = [];
  let tz = new THREE.TextureLoader();
  let mx_ft = tz.load("Models/rover-red.jpg");
  let mx_bk = tz.load("Models/rover-logo.jpg");
  let mx_up = tz.load("Models/orange.jpg");
 
  normalz.push(new THREE.MeshBasicMaterial({ map: mx_ft }));
  normalz.push(new THREE.MeshBasicMaterial({ map: mx_bk }));
  normalz.push(new THREE.MeshBasicMaterial({ map: mx_up }));

        var dummyvar;
        for (var i = 0; i < 3; i++)
    normalz[i].side = THREE.BackSide;

        var loader = new THREE.OBJLoader( );
        loader.setResourcePath( '/odels/' );
        loader.load( 'Models/1.obj', function ( object ) {
          object.traverse( function ( child ) {
            object.scale.set(0.002, 0.002, 0.002);
            object.position.y = -100;
            object.position.x = 400;
             object.position.z = -5000;
             // object.Color = 'blue';
            // object.rotateX(-Math.PI/2);
            if (child instanceof THREE.Mesh) {
                    child.material.map = carTexture;
        //  child.material.map = texture1;
                }
            
          } );

          carmodel = object;
          scene.add( object );
        } );


 //create lights

       
        s = new lights(-700, -100, -1000);

        s1 = new lights(-750, -100, -3000);

         s2 = new lights(-750, -100, -5000);
        s3 = new lights(900, -100, -1000);
        s4 = new lights(900, -100, -3000);
        s5 = new lights(900, -100, -5000);
        s.show(scene);
        s1.show(scene);
        s2.show(scene);
         s3.show(scene);
          s4.show(scene);
           s5.show(scene);


function Flyhelicopter() {

           y =  model.position.x;

           renderer.render(scene, camera);
           // model.rotation.set(Math.PI,0,0);
           //model.lookAt(1,-1,1);
          model.position.x = y + 5;
  requestAnimationFrame(Flyhelicopter);

      };


function Flyaeroplane() {

           y =  model1.position.z;

           renderer.render(scene, camera);
           // model.rotation.set(Math.PI,0,0);
           //model.lookAt(1,-1,1);
          model1.position.z = y - 5;
  requestAnimationFrame(Flyaeroplane);

      };

function runcar() {

           c =  carmodel.position.z;
           d = carmodel2.position.x;

// move car 1

           renderer.render(scene, camera);
           if(carmodel.position.z < -500 && count > 1)
           {
            carmodel.position.z = c + 20;
            }
          else
          {
            count = 0;

            carmodel.rotation.set(0,-Math.PI/2,0);
            carmodel.position.x = carmodel.position.x - 10;
            if (carmodel.position.x < -4000)
            {

                carmodel.rotation.set(0,-Math.PI/2,0);
              carmodel.position.set = (400,-100,-5000);
            
              carmodel.position.x = 0;
              count = 2;
            }
        }

// move car 2

            
           if(carmodel1.position.x < 6500 )
           {
            carmodel1.position.x = carmodel1.position.x + 20;
            }
          else
          {
           
            carmodel1.position.set(-4000, -100, 500);

          }

        // move car 3

           if(carmodel2.position.x > -5720)
           {
            carmodel2.position.x = d - 20;
            }
          else
          {
            carmodel2.position.set(5000,-100,-500);
          }



  requestAnimationFrame(runcar);

      };

        //create robots

        all_robots = [];
        r = new Robot(0, -30, 0);
        r.show(scene);
        all_robots.push(r);
         controller = {
          anaglyph: false,
          
             walk: function() {
           // body...
           for (var r  in all_robots ){
            r = all_robots  [r];
            r.walk();

           }
         },

         AnimateCity: function() {

         model.translateX(10);

          z =0;
          Flyaeroplane();
          Flyhelicopter();
          runcar();
         }

          
        }

        var gui = new dat.GUI();
                var moving = gui.addFolder( "Movement" );
                moving.add( controller, "walk");
                moving.add(controller, "AnimateCity");

     renderer = new THREE.WebGLRenderer();
        renderer.setPixelRatio( window.devicePixelRatio );
        renderer.setSize( window.innerWidth, window.innerHeight );
        container.appendChild( renderer.domElement );

        controls = new THREE.TrackballControls( camera, renderer.domElement );

          animate();


        };

              window.onclick = function(e) {
          if (!e.shiftKey) {
            e.preventDefault();
            return false;
          }
          pixel_coords = new THREE.Vector2( e.clientX, e.clientY );
          vp_coords = new THREE.Vector2( ( pixel_coords.x / window.innerWidth ) * 2 - 1,
                                        -( pixel_coords.y / window.innerHeight ) * 2 + 1);
          vp_coords_near = new THREE.Vector3( vp_coords.x, vp_coords.y, 0);
          raycaster = new THREE.Raycaster();
          raycaster.setFromCamera(vp_coords_near, camera);
          intersects = raycaster.intersectObject(floor);
          if (intersects.length > 0) {
              r = new Robot(intersects[0].point.x, 
                                  intersects[0].point.y + 70,
                                  intersects[0].point.z);
              r.show(scene);
              all_robots.push(r);
          }
      };

  
      function animate() {

        requestAnimationFrame( animate );
         for (r in all_robots) {
          r = all_robots[r];
          r.onAnimate();  

          }

        controls.update();

        renderer.render( scene, camera );

      };

    </script>
  </head>
  <body>
    <div style="visibility:hidden">
    <video id="video" loop crossOrigin="anonymous" webkit-playsinline style="display:none">
      <source src="water2.mov" >
    </video>


  </body>
</html>