	
<html>
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    <title>Vanilla WebGL!</title>
    <style>
      html, body { 
        background-color:#000;
        margin: 0;
        padding: 0;
        height: 100%;
        overflow: hidden !important;  
      }
 
      #c {
        width: 100%;
        height: 100%;
      }
    </style>
  </head>
  <script type="text/javascript" src="https://cs460.org/js/glmatrix.js"></script>
  
  <script id="vertexshader" type="glsl">
    attribute vec3 position;
	uniform vec3 offset;
    void main(void) {
      vec3 finalPos = position;
	  finalPos.x += offset.x;
	  finalPos.y += offset.y;
	  finalPos.z += offset.z;
	  
      gl_Position = vec4( finalPos, 1.);
    
    }
  </script>
  
  <script id="fragmentshader" type="glsl">
    precision mediump float;
	uniform vec4 color;
 
    void main(void) {
	  
      gl_FragColor = color;
 
    }
  </script>
 
  <script>
 
    // VARIABLE DECLARATIONS
	var c, gl;
	var v_shader, f_shader, shaderprogram;
	//var vertices, indices, vBuffer, iBuffer;
    window.onload = function() {
      
 
      //************************************************************//
      //
      // INITIALIZE WEBGL
      //
	  c = document.getElementById("c");
	  c.width = window.innerWidth;
	  c.height = window.innerHeight;
	  
	  gl = c.getContext("webgl");
	  gl.viewport(0, 0, c.width, c.height);
 
 
 
      //************************************************************//
      //
      // SHADERS
      //
	  v_shader = gl.createShader(gl.VERTEX_SHADER);
	  f_shader = gl.createShader(gl.FRAGMENT_SHADER);
	  
	  //Compile Shaders 
	  gl.shaderSource(v_shader, document.getElementById("vertexshader").innerText);
	  gl.compileShader(v_shader);
	  if(!gl.getShaderParameter(v_shader, gl.COMPILE_STATUS)){
		console.log(gl.getShaderInfoLog(v_shader));
	  }
 
	  gl.shaderSource(f_shader, document.getElementById("fragmentshader").innerText);
	  gl.compileShader(f_shader);
	  if(!gl.getShaderParameter(f_shader, gl.COMPILE_STATUS)){
		console.log(gl.getShaderInfoLog(f_shader));
	  }
	  
	  //Attach and Link shaderSource
	  shaderprogram = gl.createProgram();
	  gl.attachShader(shaderprogram, v_shader);
	  gl.attachShader(shaderprogram, f_shader);
	  gl.linkProgram(shaderprogram);
	  gl.useProgram(shaderprogram);
	  
	  //Add Objects
	  objects = [];
	  objects.push(createRectangle([0.0, 1.0, 1.0, 1.0], [0.0, 0.0, 0.0]));
	  objects.push(createRectangle([1.0, 0.0, 1.0, 1.0], [0.2, 0.0, 0.0]));
	  
	  gl.clearColor(0, 0, 0, 0);
	  gl.clear(gl.COLOR_BUFFER_BIT);
	  animate();
    };
 
    function animate(){
		//Loop through all objects
		for(i = 0; i < objects.length; i++){
			var currObject = objects[i];
			var vBuffer = currObject[0];
			var iBuffer = currObject[1];
			var currColor = currObject[2];
			var currOffset = currObject[3];
			//************************************************************//
			//
			// CONNECT SHADER WITH GEOMETRY
			//
			gl.bindBuffer(gl.ARRAY_BUFFER, vBuffer);
			gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, iBuffer);
			var aPos = gl.getAttribLocation(shaderprogram, "position");
			gl.vertexAttribPointer(aPos, 3, gl.FLOAT, false, 0, 0);
			gl.enableVertexAttribArray(aPos);
			
			var uColor = gl.getUniformLocation(shaderprogram, 'color');
			gl.uniform4fv(uColor, currColor);
			
			var uOffset = gl.getUniformLocation(shaderprogram, 'offset');
			gl.uniform3fv(uOffset, currOffset);
			//************************************************************//
			//
			// DRAW!
			//

			//gl.drawArrays(gl.TRIANGLES, 0, 6);
			gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_BYTE, 0);
		
		}	
			
			//Animation Loop
			requestAnimationFrame(animate);
			
	}
	
	function createRectangle(color, offset){
      //************************************************************//
      //
      // CREATE GEOMETRY
      //
      vertices = new Float32Array( [
                                     -0.5,  0.5, 0.0, // V0     //0
                                     -0.5, -0.5, 0.0, // V1, V4 //1
                                      0.5,  0.5, 0.0, // V2, V3 //2
                                      0.5, -0.5, 0.0  // V5     //3
                                    ] );
									
	  indices = new Uint8Array( [
									0, 1, 2,
									2, 1, 3
									]);
      var vBuffer = gl.createBuffer(); //Creates buffer
	  gl.bindBuffer(gl.ARRAY_BUFFER, vBuffer); //Binds
	  gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);
	  gl.bindBuffer(gl.ARRAY_BUFFER, null); //Unbind
	  
	  var iBuffer = gl.createBuffer();
	  gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, iBuffer);
	  gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, indices, gl.STATIC_DRAW);
	  gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);
	
	  return [vBuffer, iBuffer, new Float32Array(color), new Float32Array(offset)];
	}
	
 
  </script>
  <body>
    <canvas id="c"></canvas>
  </body>
</html>
